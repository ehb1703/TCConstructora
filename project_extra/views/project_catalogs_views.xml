<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="action_project_type" model="ir.actions.act_window">
        <field name="name">Tipo de Obra</field>
        <field name="res_model">project.type</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="view_project_type_list" model="ir.ui.view">
        <field name="name">view.project.type.list</field>
        <field name="model">project.type</field>
        <field name="priority">1</field>
        <field name="arch" type="xml">
            <list string="Tipo de Obra">
                <field name="code"/>
                <field name="name"/>
                <field name="normative_clas"/>
                <field name="technicalcat_id"/>
                <field name="uom_id"/>
            </list>
        </field>
    </record>

    <record id="view_project_type_from" model="ir.ui.view">
        <field name="name">view.project.type.from</field>
        <field name="model">project.type</field>
        <field name="arch" type="xml">
            <form string="Tipo de Obra" delete="0" duplicate="0">
                <sheet>
                    <group>
                        <group>
                            <field name="code"/>
                            <field name="name"/>
                            <field name="normative_clas"/>
                        </group>
                        <group>
                            <field name="technicalcat_id"/>
                            <field name="uom_id"/>
                        </group>
                    </group>
                    <group>
                        <field name="description"/>
                        <field name="observations"/>
                    </group>
                    <group>
                        <group>
                            <field name="docto_req_id" widget="many2many_tags"/>
                        </group>
                        <group>
                            <field name="docto_noreq_id" widget="many2many_tags"/>
                        </group>
                    </group>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <record id="action_project_docsrequeridos" model="ir.actions.act_window">
        <field name="name">Documentos</field>
        <field name="res_model">project.docsrequeridos</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="view_project_docsrequeridos_list" model="ir.ui.view">
        <field name="name">view.project.type.list</field>
        <field name="model">project.docsrequeridos</field>
        <field name="priority">1</field>
        <field name="arch" type="xml">
            <list string="Documentos">
                <field name="nombre_archivo"/>
                <field name="desc_archivo"/>
                <field name="model_id"/>
            </list>
        </field>
    </record>

    <record id="view_project_docsrequeridos_from" model="ir.ui.view">
        <field name="name">view.project.docsrequeridos.from</field>
        <field name="model">project.docsrequeridos</field>
        <field name="arch" type="xml">
            <form string="Documentos" delete="0" duplicate="0">
                <sheet>
                    <group>
                        <field name="nombre_archivo"/>
                        <field name="desc_archivo"/>
                        <field name="model_id" options="{'no_open':True, 'no_create':True, 'no_edit':True}"/>
                        <field name="etapa"/>
                    </group>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <record id="action_project_technical_category" model="ir.actions.act_window">
        <field name="name">Categoría Técnica</field>
        <field name="res_model">project.technical.category</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="view_project_technical_category_list" model="ir.ui.view">
        <field name="name">view.project.technical.category.list</field>
        <field name="model">project.technical.category</field>
        <field name="priority">1</field>
        <field name="arch" type="xml">
            <list string="Categoría Técnica">
                <field name="name"/>
                <field name="description"/>
            </list>
        </field>
    </record>

    <record id="view_project_technical_category_from" model="ir.ui.view">
        <field name="name">view.project.technical.category.from</field>
        <field name="model">project.technical.category</field>
        <field name="arch" type="xml">
            <form string="Categoría Técnica" delete="0" duplicate="0">
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="description"/>
                    </group>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

        <record id="action_tipo_zona" model="ir.actions.act_window">
        <field name="name">Tipos de Zona</field>
        <field name="res_model">project.tipo.zona</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="view_tipo_zona_tree" model="ir.ui.view">
        <field name="name">project.tipo.zona.list</field>
        <field name="model">project.tipo.zona</field>
        <field name="arch" type="xml">
            <list>
                <field name="code"/>
                <field name="name"/>
                <field name="active"/>
            </list>
        </field>
    </record>

    <record id="view_tipo_zona_form" model="ir.ui.view">
        <field name="name">project.tipo.zona.form</field>
        <field name="model">project.tipo.zona</field>
        <field name="arch" type="xml">
            <form string="Tipo de Zona">
                <sheet>
                    <group>
                        <field name="code"/>
                        <field name="name"/>
                        <field name="description"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Zonas Geográficas -->
    <record id="action_zona_geografica" model="ir.actions.act_window">
        <field name="name">Zonas Geográficas</field>
        <field name="res_model">project.zona.geografica</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="view_zona_geografica_tree" model="ir.ui.view">
        <field name="name">project.zona.geografica.list</field>
        <field name="model">project.zona.geografica</field>
        <field name="arch" type="xml">
            <list>
                <field name="code"/>
                <field name="name"/>
                <field name="tipo_zona_id"/>
                <field name="active"/>
            </list>
        </field>
    </record>

    <record id="view_zona_geografica_form" model="ir.ui.view">
        <field name="name">project.zona.geografica.form</field>
        <field name="model">project.zona.geografica</field>
        <field name="arch" type="xml">
            <form string="Zona Geográfica">
                <sheet>
                    <group>
                        <field name="code"/>
                        <field name="name"/>
                        <field name="tipo_zona_id"/>
                        <field name="observaciones"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Especialidades -->
    <record id="action_especialidad" model="ir.actions.act_window">
        <field name="name">Especialidades</field>
        <field name="res_model">project.especialidad</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="view_especialidad_tree" model="ir.ui.view">
        <field name="name">project.especialidad.list</field>
        <field name="model">project.especialidad</field>
        <field name="arch" type="xml">
            <list>
                <field name="name"/>
                <field name="clasificacion_id"/>
                <field name="nivel_complejidad"/>
                <field name="requiere_validacion_externa"/>
                <field name="active"/>
            </list>
        </field>
    </record>

    <record id="view_especialidad_form" model="ir.ui.view">
        <field name="name">project.especialidad.form</field>
        <field name="model">project.especialidad</field>
        <field name="arch" type="xml">
            <form string="Especialidad">
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="clasificacion_id"/>
                        </group>
                        <group>
                            <field name="nivel_complejidad"/>
                            <field name="requiere_validacion_externa"/>
                        </group>
                    </group>
                    <group>
                        <field name="description"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Modalidad de Contrato -->
    <record id="action_modalidad_contrato" model="ir.actions.act_window">
        <field name="name">Modalidad de Contrato</field>
        <field name="res_model">project.modalidad.contrato</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="view_modalidad_contrato_tree" model="ir.ui.view">
        <field name="name">project.modalidad.contrato.list</field>
        <field name="model">project.modalidad.contrato</field>
        <field name="arch" type="xml">
            <list string="Modalidades de Contrato">
                <field name="code"/>
                <field name="name"/>
                <field name="fundamento_legal"/>
            </list>
        </field>
    </record>

    <record id="view_modalidad_contrato_form" model="ir.ui.view">
        <field name="name">project.modalidad.contrato.form</field>
        <field name="model">project.modalidad.contrato</field>
        <field name="arch" type="xml">
            <form string="Modalidad de Contrato">
                <sheet>
                    <group>
                        <group>
                            <field name="code"/>
                            <field name="name"/>
                        </group>
                    </group>
                    <group>
                        <field name="description"/>
                    </group>
                    <group>
                        <field name="fundamento_legal"/>
                    </group>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <!-- Tipo de Insumo -->
    <record id="action_tipo_insumo" model="ir.actions.act_window">
        <field name="name">Tipo de Insumo</field>
        <field name="res_model">product.tipo.insumo</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="view_tipo_insumo_tree" model="ir.ui.view">
        <field name="name">product.tipo.insumo.list</field>
        <field name="model">product.tipo.insumo</field>
        <field name="arch" type="xml">
            <list string="Tipos de Insumo">
                <field name="codigo"/>
                <field name="nombre"/>
                <field name="descripcion"/>
                <field name="insumo_count" string="Insumos"/>
            </list>
        </field>
    </record>

    <record id="view_tipo_insumo_form" model="ir.ui.view">
        <field name="name">product.tipo.insumo.form</field>
        <field name="model">product.tipo.insumo</field>
        <field name="arch" type="xml">
            <form string="Tipo de Insumo">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" type="object" name="action_view_insumos" icon="fa-cubes">
                            <field name="insumo_count" widget="statinfo" string="Insumos"/>
                        </button>
                    </div>
                    <group>
                        <group>
                            <field name="codigo"/>
                            <field name="nombre"/>
                        </group>
                        <group>
                            <field name="fecha_creacion"/>
                        </group>
                    </group>
                    <group>
                        <field name="descripcion"/>
                    </group>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <record id="view_product_template_tipo_insumo_form" model="ir.ui.view">
        <field name="name">product.template.tipo.insumo.form</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='combo_ids']" position="attributes">
                <attribute name="invisible">type == 'consu'</attribute>
            </xpath>
            <xpath expr="//field[@name='categ_id']" position="after">
                <field name="tipo_insumo_id" invisible="not purchase_ok" options="{'no_open':True, 'no_create':True}"/>
            </xpath>
        </field>
    </record>

    <!-- Vista para agregar tipos de insumo en contactos (proveedores) -->
    <record id="view_partner_tipo_insumo_form" model="ir.ui.view">
        <field name="name">res.partner.tipo.insumo.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="account.view_partner_property_form"/>
        <field name="priority">100</field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='classupplier_id']" position="after">
                <field name="tipo_insumo_ids" widget="many2many_tags" invisible="not is_supplier" options="{'no_create': True, 'no_open': True}"/>
            </xpath>
        </field>
    </record>

    <menuitem id="menu_catalog_project" name="Catálogos" parent="project.menu_main_pm" sequence="200" groups="project.group_project_user,group_project_catalog">
        <menuitem id="menu_project_type" name="Tipo de Obra" action="action_project_type" sequence="1"/>
        <menuitem id="menu_project_docsrequeridos" name="Documentos" action="action_project_docsrequeridos" sequence="2"/>
        <menuitem id="menu_project_technical_category" name="Categoría Técnica" action="action_project_technical_category" sequence="3"/>
        <menuitem id="menu_tipos_zona" name="Tipos de Zona" action="action_tipo_zona" sequence="4"/>
        <menuitem id="menu_zonas_geo" name="Zonas Geográficas" action="action_zona_geografica" sequence="5"/> 
        <menuitem id="menu_especialidad" name="Especialidades" action="action_especialidad" sequence="6"/>
        <menuitem id="menu_modalidad_contrato" name="Modalidad de Contrato" action="action_modalidad_contrato" sequence="7"/>
    </menuitem>

    <!-- Menú Tipos de insumo en Compras → Productos -->
    <menuitem id="menu_tipo_insumo_compras" name="Tipos de insumo" parent="purchase.menu_purchase_products" action="action_tipo_insumo" sequence="1" groups="purchase.group_purchase_user,purchase.group_purchase_manager"/>

</odoo>
