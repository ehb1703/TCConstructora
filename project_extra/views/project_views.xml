<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_licitacion_data_from" model="ir.ui.view">
        <field name="name">view.licitacion.data.from</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.edit_project"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="before">
                <group>
                    <group>
                        <label for="fecha_inicio_obra" string="Fecha inicio"/>
                        <div class="o_row">
                            <field name="fecha_inicio_obra" readonly="1" nolabel="1"/>
                            <i class="fa fa-long-arrow-right mx-2" title="Hasta"/>
                            <field name="fecha_fin_obra" nolabel="1"/>
                        </div>
                    </group>
                </group>
            </xpath>
            
            <xpath expr="//notebook" position="before">
                <group string="Orden de Trabajo" invisible="not lead_id">
                    <field name="lead_id" invisible="1"/>
                    <group>
                        <field name="orden_trabajo" readonly="1"/>
                        <field name="dependencia"/>
                        <field name="company_id" readonly="1" string="Ejecutor"/>
                        <field name="proj_fecha_adjudicacion" readonly="1" string="Fecha de adjudicación"/>
                    </group>
                    <group>
                        <field name="authorized_budget" readonly="1" string="Importe contratado"/>
                        <field name="proj_anticipo_porcentaje" readonly="1" string="% de anticipo"/>
                        <field name="proj_importe_anticipo" readonly="1" string="Importe anticipo"/>
                        <field name="proj_dias" readonly="1" string="Días"/>
                        
                    </group>
                </group>
            </xpath>

            <xpath expr="//notebook[last()]" position="inside">
                <page string="Localizacion" name="geo_location">
                    <group string="Ubicación de la Obra">
                        <span>Ubicación</span>
                        <div class="o_address_format">
                            <field name="country_id" class="o_address_country" placeholder="País" options="{'no_open':True, 'no_create':True}"/>
                            <field name="state_id" class="o_address_state" placeholder="Estado" options="{'no_open':True, 'no_create':True}" domain="[('country_id','=',country_id)]"/>
                            <field name="city_id" placeholder="Ciudad" class="o_address_city" domain="[('state_id','=',state_id)]" options="{'no_open':True, 'no_create':True}"/>
                            <field name="street" placeholder="Calle..." class="o_address_street"/>
                            <field name="between_streets" placeholder="Entre Calles..." class="o_address_street"/>
                            <field name="col" placeholder="Colonia..." class="o_address_street"/>
                            <field name="zip" placeholder="CP" class="o_address_zip"/>
                        </div>
                    </group>
                    <group>
                        <field name="centro" widget="url"/>
                        <field name="tramo" widget="url"/>
                    </group>
                    <group string="Geolocalizacion">
                        <label for="date_localization" string="Geolocalizacion"/>
                        <div>
                            <span>Lat : <field name="partner_latitude" nolabel="1" class="oe_inline"/></span><br/>
                            <span>Long: <field name="partner_longitude" nolabel="1" class="oe_inline"/></span><br/>
                            <span invisible="not date_localization">Updated on:
                                <field name="date_localization" nolabel="1" readonly="1" class="oe_inline"/><br/>
                            </span>
                            <div name="geo_localize_button">
                                <button invisible="partner_latitude != 0 or partner_longitude != 0" icon="fa-gear" string="Compute based on address" title="Compute Localization" name="geo_localize" type="object" class="btn btn-link p-0"/>
                                <button invisible="partner_latitude == 0 and partner_longitude == 0" icon="fa-refresh" string="Refresh" title="Refresh Localization" name="geo_localize" type="object" class="btn btn-link p-0"/>
                            </div>
                        </div>
                    </group>
                </page>
                <page string="Datos de la obra" name="data_project">
                    <group>
                        <group>
                            <field name="normatividad_id" options="{'no_create': True, 'no_open': True}"/>
                            <field name="licitacion" readonly="1" string="Asignación"/>
                            <field name="modalidad_contratacion_id" readonly="1"/>
                            <field name="proj_fecha_apertura" readonly="1" string="Fecha de apertura"/>
                            <field name="contrato_a_id" options="{'no_create': True, 'no_open': True}"/>
                            <field name="bloque"/>
                            <field name="fianzas"/>
                            <field name="responsable_id"/>
                        </group>
                        <group>
                            <field name="proj_es_siop" invisible="1"/>
                            <field name="proj_rupc_siop" readonly="1" invisible="not proj_es_siop"/>
                            <field name="direccion_gral_ejecutora_id" options="{'no_create': True, 'no_open': True}"/>
                            <field name="proj_sancion_atraso" readonly="1"/>
                            <field name="proj_ret_5_millar" readonly="1" string="Retención 5 al millar"/>
                            <field name="proj_ret_2_millar" readonly="1" string="Retención 2 al millar"/>
                            <field name="cost_overrun"/>
                            <field name="superficie"/>
                            <field name="type_id"/>
                        </group>
                    </group>
                    <group string="Residentes">
                        <field name="resident_ids">
                            <list>
                                <field name="resident_id"/>
                                <field name="active"/>
                            </list>
                        </field>
                    </group>
                </page>
                <page string="Documentos">
                    <field name="documentos_ids" nolabel="1">
                        <list decoration-success="requerido == True" decoration-bf="generado != False" editable="bottom" create="0" delete="0">
                            <field name="requerido" readonly="1"/>
                            <field name="docto_id" readonly="1" options="{'no_create':True, 'no_open':True}"/>
                            <field name="generado"/>
                        </list>
                     </field>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
