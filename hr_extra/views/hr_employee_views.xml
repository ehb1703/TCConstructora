<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_hr_employee_obras_form" model="ir.ui.view">
        <field name="name">hr.employee.obras.form</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="priority">100</field>
        <field name="arch" type="xml">
            <xpath expr="//sheet/div[2]/div[1]/h1[1]" position="replace">
                <field name="work_contact_id" />
                <h1 class="d-flex flex-row align-items-center">
                    <div invisible="not user_id" class="me-2">
                        <widget name="hr_employee_chat" invisible="not context.get('chat_icon')"/>
                    </div>
                    <field name="name" placeholder="Employee's Name" required="True" style="font-size: min(4vw, 2.6rem);" readonly="1"/>
                </h1>
            </xpath>
            <xpath expr="//field[@name='department_id']" position="after">
                <field name="director_ids" widget="many2many_tags" string="Director/Gerente" options="{'no_create': True, 'no_open': True}"/>
            </xpath>
            <xpath expr="//notebook/page[last()]" position="after">
                <page string="Obras" name="obras_asignadas">
                    <field name="obra_ids">
                        <list string="Obras asignadas" editable="bottom">
                            <field name="project_id" options="{'no_create': True, 'no_open': True}"/>
                            <field name="etapa_id" readonly="1"/>
                            <field name="fecha_inicio" readonly="1"/>
                            <field name="fecha_fin" readonly="1"/>
                        </list>
                    </field>
                </page>
            </xpath>
        </field>
    </record>

    <record id="hr_employee_api_tree" model="ir.ui.view">
        <field name="name">hr.employee.api.tree</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="before">
                <field name="registration_number" optional="show"/>
            </xpath>
        </field>
    </record>

    <record id="hr_employee_infonavit_form" model="ir.ui.view">
        <field name="name">hr.employee.infonavit.form</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr_payroll.payroll_hr_employee_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='hr_payroll']/group/group[@name='payroll_group']" position="replace">
                <group name="payroll_group" string="Payroll">
                    <field name="legal_name"/>
                    <field name="lang" string="Idioma del recibo de nÃ³mina"/>
                    <field name="registration_number"/>
                    <field name="disabled"/>
                </group>
                <group name="otros" string="Otros">
                    <field name="infonavit"/>
                    <field name="fonacot"/>
                </group>
            </xpath>
        </field>
    </record>

    <record id="hr_contract_report_form" model="ir.ui.view">
        <field name="name">hr.contract.report.form</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header/field[@name='state']" position="before">
                <field name="contract_type_name" invisible="1"/>
                <button name="action_report_contract" string="Contrato" class="btn-primary" type="object"/>
                <button name="action_report_convenio" string="Convenio" class="btn-secondary" type="object" invisible="contract_type_name not in ['Obra determinada', 'Permanente']"/>
            </xpath>

            <xpath expr="//field[@name='hr_responsible_id']" position="before">
                <field name="project_id" string="Obra" options="{'no_create': True, 'no_open': True}" invisible="contract_type_name not in ['Obra determinada']"/>
            </xpath>

            <xpath expr="//notebook" position="inside">
                <page string="Beneficiarios" name="beneficiarios">
                    <field name="beneficiario_ids">
                        <list string="Beneficiarios" editable="bottom">
                            <field name="nombre_id" options="{'no_create': True, 'no_open': True}"/>
                            <field name="parentesco_id" options="{'no_create': True, 'no_open': True}"/>
                            <field name="porcentaje"/>
                        </list>
                    </field>
                    <group>
                        <group></group>
                        <group>
                            <div class="oe_subtotal_footer_separator">
                                <label for="total_porcentaje" string="Total"/>
                                <field name="total_porcentaje" nolabel="1" class="oe_subtotal_footer_separator"/>
                            </div>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <record id="hr_contract_daily_form" model="ir.ui.view">
        <field name="name">hr.contract.daily.form</field>
        <field name="model">hr.contract</field>
        <field name="inherit_id" ref="hr_payroll.hr_contract_form_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@name='hourly_wage']" position="after">
                <field name="daily_wage"/>
            </xpath>
        </field>
    </record>
</odoo>
